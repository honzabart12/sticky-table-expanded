/**
 * Vanilla Javascript Sticky Table v1.0.0
 * https://zhitkovkostya.github.io/vanilla-js-sticky-table
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VanillaStickyTable={})}(this,function(e){"use strict";var t={},l={},r={};r.throttle=function(t,l=100){let r=null;return function(...e){null===r&&(r=setTimeout(()=>{t.apply(this,e),r=null},l))}};const i=r["throttle"];l.StickyTable=class{scrollLeft=0;el=null;wrapperElement=null;constructor(e){this.el=e,this._wrapTable(),this._wrapTableHead(),this._wrapTableBody(),this._syncColumnWidth(),this._syncHeadPosition(),this._handleWindowScrollThrottled=i(this._handleWindowScroll.bind(this),20),this._handleWindowResizeThrottled=i(this._handleWindowResize.bind(this),20),window.addEventListener("scroll",this._handleWindowScrollThrottled.bind(this),!1),window.addEventListener("resize",this._handleWindowResizeThrottled.bind(this))}_wrapTable(){const e=document.createElement("div");e.className="js-table-wrapper",this.el.parentNode.insertBefore(e,this.el),e.append(this.el),this.wrapperElement=e}_wrapTableHead(){const e=document.createElement("table"),t=this.el.tHead,l=Array.from(t.querySelectorAll(".js-table-cell"));var r=t.cloneNode(!0);t.style.visibility="collapse",l.forEach(e=>{e.style.lineHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0}),e.classList.add("table"),this.headWrapperElement=document.createElement("div"),this.headWrapperElement.className="js-table-head-wrapper",this.headWrapperElement.dataset.isFixed=!1,this.headWrapperElement.style.overflowX="auto",this.headWrapperElement.ariaHidden=!0,this.headWrapperElement.appendChild(e).appendChild(r),this.wrapperElement.insertBefore(this.headWrapperElement,this.el),this._handleHeadWrapperHorizontalScrollThrottled=i(this._handleHorizontalScroll.bind(this),10),this.headWrapperElement.addEventListener("scroll",this._handleHeadWrapperHorizontalScrollThrottled.bind(this),!1)}_wrapTableBody(){this.bodyWrapperElement=document.createElement("div"),this.bodyWrapperElement.className="js-table-body-wrapper",this.bodyWrapperElement.style.overflowX="auto",this.wrapperElement.insertBefore(this.bodyWrapperElement,this.el),this.bodyWrapperElement.appendChild(this.el),this._handleBodyWrapperHorizontalScrollThrottled=i(this._handleHorizontalScroll.bind(this),10),this.bodyWrapperElement.addEventListener("scroll",this._handleBodyWrapperHorizontalScrollThrottled.bind(this),!1)}_syncColumnWidth(){var e,t=this.headWrapperElement.querySelector("table");let l,r;for(e of this.bodyWrapperElement.querySelector("table").tHead.rows)for(var i of e.cells)r=i.offsetWidth,l=t.tHead.rows[e.rowIndex].cells[i.cellIndex],l.style.minWidth=r+"px",l.style.maxWidth=r+"px"}_syncHeadPosition(){var e="true"===this.headWrapperElement.dataset.isFixed,{bottom:t,width:l,height:r}=this.headWrapperElement.getBoundingClientRect(),{top:i,width:a}=this.bodyWrapperElement.getBoundingClientRect();e&&r<=i?(this.headWrapperElement.style.position=null,this.headWrapperElement.style.top=null,this.headWrapperElement.style.zIndex=null,this.headWrapperElement.style.width=null,this.bodyWrapperElement.style.marginTop=null,this.headWrapperElement.dataset.isFixed=!1):!e&&t<=r&&(this.headWrapperElement.style.position="fixed",this.headWrapperElement.style.top=0,this.headWrapperElement.style.zIndex=2,this.headWrapperElement.style.width=a+"px",this.bodyWrapperElement.style.marginTop=r+"px",this.headWrapperElement.dataset.isFixed=!0),l!==a&&(this.headWrapperElement.style.width=a+"px")}_syncHorizontalScroll(e,t){e=e.scrollLeft;this.scrollLeft!==e&&(this.scrollLeft=e,t.scrollLeft=e)}_handleHorizontalScroll(e){var t=e.target,e=t.nextSibling||t.previousSibling;this._syncHorizontalScroll(t,e)}_handleWindowScroll(){this._syncHeadPosition()}_handleWindowResize(){this._syncHeadPosition()}destroy(){window.removeEventListener("scroll",this._handleWindowScrollThrottled,!1),window.removeEventListener("resize",this._handleWindowResizeThrottled),this.headWrapperElement.removeEventListener("scroll",this._handleBodyWrapperHorizontalScrollThrottled,!1),this.bodyWrapperElement.addEventListener("scroll",this._handleBodyWrapperHorizontalScrollThrottled,!1)}};l=l.StickyTable,l=t.StickyTable=l;e.StickyTable=l,e.default=t,Object.defineProperty(e,"__esModule",{value:!0})});
